<!DOCTYPE html>
<html class="light" dir="rtl" lang="ar"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>المسارات التعليمية - دار الإلهام | منصة تربوية إسلامية</title>
<meta name="description" content="تابع مسارات التعلم والأنشطة التربوية في دار الإلهام - مجالس العلم والمهام العملية والوقفات التدبرية">
<meta name="keywords" content="المسارات التعليمية، مجالس العلم، الأنشطة التربوية، دار الإلهام">
<meta property="og:title" content="المسارات التعليمية - دار الإلهام">
<meta property="og:description" content="تابع مسارات التعلم والأنشطة التربوية">
<meta property="og:type" content="website">
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&amp;family=Noto+Sans+Arabic:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="../assets/css/main.css" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#4ade80",
                        "primary-dark": "#22c55e",
                        "background-light": "#f6f8f8",
                        "background-dark": "#102220",
                        "surface-light": "#ffffff",
                        "surface-dark": "#1a2c2a",
                        "text-main": "#0d1b1a",
                        "text-sub": "#4c9a93",
                    },
                    fontFamily: {
                        "display": ["'Noto Sans Arabic'", "Lexend", "sans-serif"],
                        "body": ["'Noto Sans Arabic'", "Lexend", "sans-serif"]
                    },
                    borderRadius: {"DEFAULT": "0.5rem", "lg": "1rem", "xl": "1.5rem", "full": "9999px"},
                },
            },
        }
    </script>
</head>
<body class="bg-background-light dark:bg-background-dark font-body text-text-main antialiased min-h-screen flex flex-col transition-colors duration-200">
<header class="sticky top-0 z-50 w-full h-20 border-b border-[#e7f3f2] bg-surface-light/95 dark:bg-surface-dark/95 backdrop-blur-sm px-4 lg:px-40 shadow-sm transition-colors duration-200">
    <div class="max-w-[1280px] mx-auto h-full flex items-center justify-between gap-8">
        <!-- العنوان على اليمين -->
        <div class="flex items-center gap-3 shrink-0">
            <div class="h-10 w-10 rounded-lg bg-primary/20 flex items-center justify-center text-primary-dark">
                <span class="material-symbols-outlined text-2xl">mosque</span>
            </div>
            <h2 class="text-text-main dark:text-white text-xl font-bold tracking-tight">دار الإلهام</h2>
        </div>
        
        <!-- الأزرار الثلاثة في الوسط -->
        <nav class="flex items-center gap-6" role="navigation" aria-label="القائمة الرئيسية">
            <a class="text-text-main dark:text-white text-sm font-bold border-b-2 border-primary pb-0.5 shrink-0 flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors" href="student_Learning_Paths_1.html">
                <span class="material-symbols-outlined text-lg">alt_route</span>
                <span>المسارات</span>
            </a>
            <a class="text-text-sub dark:text-gray-400 hover:text-primary-dark dark:hover:text-primary text-sm font-medium transition-colors shrink-0 flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" href="student_Progress_Dashboard.html">
                <span class="material-symbols-outlined text-lg">monitoring</span>
                <span>لوحة التقدم</span>
            </a>
            <a class="text-text-sub dark:text-gray-400 hover:text-primary-dark dark:hover:text-primary text-sm font-medium transition-colors shrink-0 flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800" href="student_info.html">
                <span class="material-symbols-outlined text-lg">person</span>
                <span>الملف الشخصي</span>
            </a>
        </nav>
        
        <!-- زر تسجيل الخروج على أقصى اليسار -->
        <div class="flex items-center gap-4 shrink-0">
            <button id="notificationsBtn" class="flex items-center justify-center size-10 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-text-main dark:text-white transition-colors relative" aria-label="الإشعارات">
                <span class="material-symbols-outlined">notifications</span>
            </button>
            <button id="logoutBtn" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 text-sm font-medium transition-colors" aria-label="تسجيل الخروج" title="تسجيل الخروج">
                <span class="material-symbols-outlined text-lg">logout</span>
                <span>تسجيل الخروج</span>
            </button>
        </div>
    </div>
</header>
<main class="flex-1 px-4 lg:px-40 py-8">
    <div class="max-w-[1280px] mx-auto flex flex-col gap-8">
        <div class="flex flex-col md:flex-row md:items-end justify-between gap-6">
            <div class="flex flex-col gap-2">
                <h1 class="text-text-main dark:text-white text-4xl font-black leading-tight tracking-tight">مسارات الطالب والتقدم</h1>
                <p class="text-text-sub dark:text-gray-400 text-lg font-normal">رحلتك التعليمية والتربوية تبدأ هنا</p>
            </div>
            <div class="flex flex-wrap gap-3 items-center">
                <div class="relative group">
                    <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 material-symbols-outlined">search</span>
                    <input class="bg-white dark:bg-surface-dark border-none ring-1 ring-gray-200 dark:ring-gray-700 focus:ring-2 focus:ring-primary rounded-xl py-2.5 pr-10 pl-4 text-sm w-64 shadow-sm transition-all dark:text-white" placeholder="ابحث في المسارات..." type="text"/>
                </div>
                <button class="flex h-10 items-center gap-2 rounded-xl bg-primary text-surface-dark font-bold px-4 shadow-lg shadow-primary/20 hover:bg-primary-dark hover:text-white transition-all">
                    <span class="material-symbols-outlined text-[20px]">add</span>
                    <span>طلب فتح نشاط</span>
                </button>
            </div>
        </div>
        <div class="flex gap-3 overflow-x-auto pb-2 scrollbar-hide">
            <button class="flex h-9 shrink-0 items-center justify-center gap-2 rounded-lg bg-primary text-surface-dark px-4 shadow-sm font-bold transition-transform hover:scale-105">
                <span class="text-sm">الكل</span>
            </button>
            <button class="flex h-9 shrink-0 items-center justify-center gap-2 rounded-lg bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 hover:border-primary/50 text-text-main dark:text-gray-300 px-4 transition-all">
                <span class="text-sm">قيد الإنجاز</span>
                <span class="flex items-center justify-center bg-orange-100 text-orange-700 text-[10px] font-bold px-1.5 py-0.5 rounded-full">3</span>
            </button>
            <button class="flex h-9 shrink-0 items-center justify-center gap-2 rounded-lg bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 hover:border-primary/50 text-text-main dark:text-gray-300 px-4 transition-all">
                <span class="text-sm">بانتظار المربي</span>
            </button>
            <button class="flex h-9 shrink-0 items-center justify-center gap-2 rounded-lg bg-white dark:bg-surface-dark border border-gray-200 dark:border-gray-700 hover:border-primary/50 text-text-main dark:text-gray-300 px-4 transition-all">
                <span class="text-sm">المكتملة</span>
            </button>
        </div>
        <section>
            <div class="flex items-center gap-3 mb-6">
                <span class="material-symbols-outlined text-primary text-3xl">school</span>
                <h2 class="text-text-main dark:text-white text-2xl font-bold">مجالس علم</h2>
            </div>
            <div id="knowledgeCouncilsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- سيتم تحميل الأنشطة هنا ديناميكياً -->
                <div class="col-span-full text-center py-12">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
                    <p class="mt-4 text-text-sub dark:text-gray-400">جاري تحميل الأنشطة...</p>
                </div>
            </div>
                <article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3">
                            <div class="size-12 rounded-xl bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center">
                                <span class="material-symbols-outlined text-2xl">menu_book</span>
                            </div>
                            <div>
                                <p class="text-text-sub dark:text-gray-400 text-xs font-medium">درس</p>
                                <h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">اسم الله الصمد</h3>
                            </div>
                        </div>
                        <span class="inline-flex items-center gap-1 rounded-full bg-blue-50 dark:bg-blue-900/20 px-2.5 py-1 text-xs font-semibold text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-800/30">
                            <span class="material-symbols-outlined text-[14px]">fiber_new</span>
                            جديد
                        </span>
                    </div>
                    <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCxvuiHpRepqeglq2-HzVCyCjUDjgmqQU8lJFpn3ibVBKVxoLnkylO3PlPAATueW9cxCxar1uwGwBMwkKayN8O28YXmA_ioj9inuxrO4RwDEe5P93X24TflUhUrsbiQfj5p5gE16M0XCrJtp5r9SBf_mMz4l3O1jK3JkkexHoYrWwX_4PkVEe2JXtQFagCIEwNQomc2rxM26vHaq-x6dqQv658aJ3WLxmQoLV-RQWMf2YeyIEZ22EMwXzj7blozQp2YuJXco0DyGJw");'>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                        <div class="absolute bottom-3 right-3 text-white text-xs font-medium flex items-center gap-1">
                            <span class="material-symbols-outlined text-[16px]">schedule</span>
                            الموعد: اليوم، ٥:٠٠ م
                        </div>
                    </div>
                    <div class="mt-auto pt-2">
                        <button class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
                            <span>بدء الدرس</span>
                            <span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
                        </button>
                    </div>
                </article>
                <article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3">
                            <div class="size-12 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 flex items-center justify-center">
                                <span class="material-symbols-outlined text-2xl">mosque</span>
                            </div>
                            <div>
                                <p class="text-text-sub dark:text-gray-400 text-xs font-medium">درس</p>
                                <h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">صفة الصلاة</h3>
                            </div>
                        </div>
                        <span class="inline-flex items-center gap-1 rounded-full bg-yellow-50 dark:bg-yellow-900/20 px-2.5 py-1 text-xs font-semibold text-yellow-700 dark:text-yellow-400 border border-yellow-100 dark:border-yellow-800/30">
                            <span class="material-symbols-outlined text-[14px]">hourglass_top</span>
                            بانتظار المربي
                        </span>
                    </div>
                    <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuA59Vf1yWW4pqgiiYnXR0gke3z5RF4nneglghqsMNSbJ5Nqtrarvg327IXwPaT_03sIg1_C1vEZqMulTU2qRdZssKRt4CQlnF4yobRJDd5KzBMoPBATfgkCkcdXdB7vCSKNHv0R-0FlRcw3SObkn7eGxfoa4adPytKfOJHCwApXroT59-GVaAIJQv3fKiPWXwz9s_A56ZEgSrS5vjLwxAzfuITamNBLNhOuaUmP8ffdHss48dDtIPC91B11rYhp3YRMaZu7e1__-H0");'>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    </div>
                    <div class="mt-auto pt-2">
                        <button class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
                            <span>بدء الدرس</span>
                            <span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
                        </button>
                    </div>
                </article>
                <article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3">
                            <div class="size-12 rounded-xl bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 flex items-center justify-center">
                                <span class="material-symbols-outlined text-2xl">auto_stories</span>
                            </div>
                            <div>
                                <p class="text-text-sub dark:text-gray-400 text-xs font-medium">درس</p>
                                <h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">قصة نبي الله يونس</h3>
                            </div>
                        </div>
                        <span class="inline-flex items-center gap-1 rounded-full bg-orange-50 dark:bg-orange-900/20 px-2.5 py-1 text-xs font-semibold text-orange-700 dark:text-orange-400 border border-orange-100 dark:border-orange-800/30">
                            <span class="material-symbols-outlined text-[14px] animate-pulse">pending</span>
                            قيد الإنجاز
                        </span>
                    </div>
                    <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDZYYTVCkB1wVzC5Ht1pjO0GCG5jUXitPvhdlUG9Nv2SHhUTnzwf5HT88OI4NFqwfq6nvOmlxEtJlz9RbRsYflN9ZsVjZ8sVGZlZ0BCNidw4ZQu68M6xceT4HtzXpOVLjtflc8gDYCnkxsGxET3GIvdp9Omr8JDoOjekRCF4QxN3UfDOZhvzJcCavYVhjmb_i3EEL6NxpSGCKXklB60Jg6DQJVyFrS8oY68H4VPkKCnyT8mDc9L31o84ivUHOUd3K_AmV34PqIZkGg");'>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    </div>
                    <div class="mt-auto pt-2">
                        <button class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
                            <span>بدء الدرس</span>
                            <span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
                        </button>
                    </div>
                </article>
</div>
</section>
        <section>
        <div class="flex items-center gap-3 mb-6">
        <span class="material-symbols-outlined text-primary text-3xl">auto_stories</span>
        <h2 class="text-text-main dark:text-white text-2xl font-bold">وقفات قرآنية</h2>
        </div>
        <div id="quranicReflectionsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- سيتم تحميل الأنشطة هنا ديناميكياً -->
            <div class="col-span-full text-center py-12">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
                <p class="mt-4 text-text-sub dark:text-gray-400">جاري تحميل الأنشطة...</p>
            </div>
        </div>
<article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
<div class="flex items-start justify-between">
<div class="flex items-center gap-3">
<div class="size-12 rounded-xl bg-teal-50 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 flex items-center justify-center">
<span class="material-symbols-outlined text-2xl">book</span>
</div>
<div>
<p class="text-text-sub dark:text-gray-400 text-xs font-medium">تدبر</p>
<h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">سورة الفيل</h3>
</div>
</div>
<span class="inline-flex items-center gap-1 rounded-full bg-orange-50 dark:bg-orange-900/20 px-2.5 py-1 text-xs font-semibold text-orange-700 dark:text-orange-400 border border-orange-100 dark:border-orange-800/30">
<span class="material-symbols-outlined text-[14px] animate-pulse">pending</span>
                            قيد الإنجاز
                        </span>
</div>
                    <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDP0tQf78ONxU8pjMAyP4kllV21JH8x1DNRU4pOdg9LcQfukmfRxd2dgwLyCR9sHR6NLTbgBQDlUmA4qS3f4r8Zjtj_EY9Bfmh5NirTFe-Rw9AxuOH2aUOtBlj0ISWWMQbuPJENwJjuSuVZyYEs7ZTE3Cnl3PH67wdjFOK4heehg7p7JXPH-HnN4pr0h6ZAL-RSeKJzvxkg6t2E7VZAKIuw14Uq41EYv69vXD91wq-U_flV0yxlpA_SA2UFrxbY_xYZCS8g3vR2sic");'>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    </div>
                    <div class="mt-auto pt-2">
                        <button class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
                            <span>بدء التدبر</span>
                            <span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
                        </button>
                    </div>
                </article>
                <article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3">
                            <div class="size-12 rounded-xl bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 flex items-center justify-center">
                                <span class="material-symbols-outlined text-2xl">edit_note</span>
                            </div>
                            <div>
                                <p class="text-text-sub dark:text-gray-400 text-xs font-medium">تدبر</p>
                                <h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">سورة القلم</h3>
                            </div>
                        </div>
                        <span class="inline-flex items-center gap-1 rounded-full bg-blue-50 dark:bg-blue-900/20 px-2.5 py-1 text-xs font-semibold text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-800/30">
                            <span class="material-symbols-outlined text-[14px]">fiber_new</span>
                            جديد
                        </span>
                    </div>
                    <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuB2hoD69DlQz7QGYHnA1t7IEBnEujHYW5Dq0l-ljsLfScMEbEi6CwPQtslB999HJRHCYySGW_RD0v-PTwHpKLMfhkjkpcVK0woB6If4L6IfzECDB8U2nSxft4zEfPrZDbsG0zKoEZljC2aC53qvylJR156GkhV0eFtqCQzsBFSch5H-sRUx_QdS9xOTP2RjphebJUx3TahEi2REpaLMCitlG9n3a0uoX_eNcJ1IZqk1bHZXVPmpKhxwz9pUAydGWUWD5fQxghyMIu4");'>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    </div>
                    <div class="mt-auto pt-2">
                        <button class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
                            <span>بدء التدبر</span>
                            <span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
                        </button>
                    </div>
                </article>
                <article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3">
                            <div class="size-12 rounded-xl bg-cyan-50 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400 flex items-center justify-center">
                                <span class="material-symbols-outlined text-2xl">menu_book</span>
                            </div>
                            <div>
                                <p class="text-text-sub dark:text-gray-400 text-xs font-medium">تدبر</p>
                                <h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">سورة المسد</h3>
                            </div>
                        </div>
                        <span class="inline-flex items-center gap-1 rounded-full bg-green-50 dark:bg-green-900/20 px-2.5 py-1 text-xs font-semibold text-green-700 dark:text-green-400 border border-green-100 dark:border-green-800/30">
                            <span class="material-symbols-outlined text-[14px]">check_circle</span>
                            مكتمل
                        </span>
                    </div>
                    <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCxvuiHpRepqeglq2-HzVCyCjUDjgmqQU8lJFpn3ibVBKVxoLnkylO3PlPAATueW9cxCxar1uwGwBMwkKayN8O28YXmA_ioj9inuxrO4RwDEe5P93X24TflUhUrsbiQfj5p5gE16M0XCrJtp5r9SBf_mMz4l3O1jK3JkkexHoYrWwX_4PkVEe2JXtQFagCIEwNQomc2rxM26vHaq-x6dqQv658aJ3WLxmQoLV-RQWMf2YeyIEZ22EMwXzj7blozQp2YuJXco0DyGJw");'>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    </div>
<div class="mt-auto pt-2">
<button class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
<span>بدء التدبر</span>
<span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
</button>
</div>
</article>
</div>
</section>
        <section>
        <div class="flex items-center gap-3 mb-6">
        <span class="material-symbols-outlined text-primary text-3xl">volunteer_activism</span>
        <h2 class="text-text-main dark:text-white text-2xl font-bold">مهام عملية</h2>
        </div>
        <div id="practicalTasksContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- سيتم تحميل الأنشطة هنا ديناميكياً -->
            <div class="col-span-full text-center py-12">
                <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
                <p class="mt-4 text-text-sub dark:text-gray-400">جاري تحميل الأنشطة...</p>
            </div>
        </div>
<article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
<div class="flex items-start justify-between">
<div class="flex items-center gap-3">
<div class="size-12 rounded-xl bg-rose-50 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 flex items-center justify-center">
<span class="material-symbols-outlined text-2xl">diversity_1</span>
</div>
<div>
<p class="text-text-sub dark:text-gray-400 text-xs font-medium">نشاط</p>
<h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">عجلة الاقتداء</h3>
</div>
</div>
<span class="inline-flex items-center gap-1 rounded-full bg-orange-50 dark:bg-orange-900/20 px-2.5 py-1 text-xs font-semibold text-orange-700 dark:text-orange-400 border border-orange-100 dark:border-orange-800/30">
<span class="material-symbols-outlined text-[14px] animate-pulse">pending</span>
                            قيد الإنجاز
                        </span>
</div>
                    <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuB2hoD69DlQz7QGYHnA1t7IEBnEujHYW5Dq0l-ljsLfScMEbEi6CwPQtslB999HJRHCYySGW_RD0v-PTwHpKLMfhkjkpcVK0woB6If4L6IfzECDB8U2nSxft4zEfPrZDbsG0zKoEZljC2aC53qvylJR156GkhV0eFtqCQzsBFSch5H-sRUx_QdS9xOTP2RjphebJUx3TahEi2REpaLMCitlG9n3a0uoX_eNcJ1IZqk1bHZXVPmpKhxwz9pUAydGWUWD5fQxghyMIu4");'>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    </div>
                    <div class="mt-auto pt-2">
                        <button class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
                            <span>بدء النشاط</span>
                            <span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
                        </button>
                    </div>
                </article>
                <article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3">
                            <div class="size-12 rounded-xl bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 flex items-center justify-center">
                                <span class="material-symbols-outlined text-2xl">pets</span>
                            </div>
                            <div>
                                <p class="text-text-sub dark:text-gray-400 text-xs font-medium">نشاط</p>
                                <h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">الرفق بالحيوان</h3>
                            </div>
                        </div>
                        <span class="inline-flex items-center gap-1 rounded-full bg-blue-50 dark:bg-blue-900/20 px-2.5 py-1 text-xs font-semibold text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-800/30">
                            <span class="material-symbols-outlined text-[14px]">fiber_new</span>
                            جديد
                        </span>
                    </div>
                    <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAGH_jyf2hee8YuscXozwKi5oX9PWBdFfN1swaeOqiKrNBT_ORIoGI1GPx4O31CRVKWqjtszaBP25h-1WV90yqsTfqoeHOw6Fle-WONnHlWRSqRxulk2Z68YDtERCP-L9-roOsPrE3oLB4JSSUFV-v9vnhHXCauPsmE52mIwt56AzLT7zNKoeInurLamw_ilEiaWKPEtozHpw-mxNPfIZC1qJ_Z-8YyqjSlCRnev4lY0VQF_ozTfPorVTISuYwCqc7eTQOa2df1T8w");'>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    </div>
                    <div class="mt-auto pt-2">
                        <button class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
                            <span>بدء النشاط</span>
                            <span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
                        </button>
                    </div>
                </article>
                <article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3">
                            <div class="size-12 rounded-xl bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center">
                                <span class="material-symbols-outlined text-2xl">cleaning_services</span>
                            </div>
                            <div>
                                <p class="text-text-sub dark:text-gray-400 text-xs font-medium">نشاط</p>
                                <h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">تنظيف المنزل</h3>
                            </div>
                        </div>
                        <span class="inline-flex items-center gap-1 rounded-full bg-yellow-50 dark:bg-yellow-900/20 px-2.5 py-1 text-xs font-semibold text-yellow-700 dark:text-yellow-400 border border-yellow-100 dark:border-yellow-800/30">
                            <span class="material-symbols-outlined text-[14px]">hourglass_top</span>
                            بانتظار المربي
                        </span>
                    </div>
                    <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDZYYTVCkB1wVzC5Ht1pjO0GCG5jUXitPvhdlUG9Nv2SHhUTnzwf5HT88OI4NFqwfq6nvOmlxEtJlz9RbRsYflN9ZsVjZ8sVGZlZ0BCNidw4ZQu68M6xceT4HtzXpOVLjtflc8gDYCnkxsGxET3GIvdp9Omr8JDoOjekRCF4QxN3UfDOZhvzJcCavYVhjmb_i3EEL6NxpSGCKXklB60Jg6DQJVyFrS8oY68H4VPkKCnyT8mDc9L31o84ivUHOUd3K_AmV34PqIZkGg");'>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    </div>
<div class="mt-auto pt-2">
<button class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
<span>بدء النشاط</span>
<span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
</button>
</div>
</article>
</div>
</section>
<div class="flex justify-center mt-8 pb-12">
<button class="flex items-center gap-2 text-text-sub dark:text-gray-400 hover:text-primary-dark dark:hover:text-primary font-medium text-sm transition-colors py-2 px-6 rounded-full hover:bg-white dark:hover:bg-surface-dark shadow-sm">
<span class="material-symbols-outlined animate-spin">sync</span>
<span>تحميل المزيد من الأنشطة</span>
</button>
</div>
</div>
</main>
<script src="../assets/js/main.js"></script>
<script>
    // ============================================
    // متغيرات عامة
    // ============================================
    let allActivities = [];
    let currentFilter = 'all';
    let currentSearch = '';

    // ============================================
    // التحقق من المصادقة
    // ============================================
    if (typeof Auth !== 'undefined') {
        if (!Auth.requireAuth('../public/auth/login.html')) {
            // سيتم إعادة التوجيه تلقائياً
        }
    }

    // ============================================
    // إنشاء بطاقة نشاط
    // ============================================
    function createActivityCard(activity) {
        // تحديد الألوان والأيقونات حسب النوع
        const typeConfig = {
            'مجلس علم': {
                icon: 'menu_book',
                bgColor: 'bg-blue-50 dark:bg-blue-900/30',
                textColor: 'text-blue-600 dark:text-blue-400',
                label: 'درس'
            },
            'وقفة تدبرية': {
                icon: 'book',
                bgColor: 'bg-teal-50 dark:bg-teal-900/30',
                textColor: 'text-teal-600 dark:text-teal-400',
                label: 'تدبر'
            },
            'مهمة عملية': {
                icon: 'diversity_1',
                bgColor: 'bg-rose-50 dark:bg-rose-900/30',
                textColor: 'text-rose-600 dark:text-rose-400',
                label: 'نشاط'
            }
        };

        const config = typeConfig[activity.type] || typeConfig['مهمة عملية'];
        
        // تحديد حالة النشاط
        // studentSubmission سيتم تمريره من loadActivities
        const studentSubmission = activity.studentSubmission;

        let statusBadge = '';
        let statusText = 'جديد';
        let statusColor = 'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 border-blue-100 dark:border-blue-800/30';
        let statusIcon = 'fiber_new';

        if (studentSubmission) {
            if (studentSubmission.status === 'مقبول') {
                statusText = 'مكتمل';
                statusColor = 'bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border-green-100 dark:border-green-800/30';
                statusIcon = 'check_circle';
            } else if (studentSubmission.status === 'معلق') {
                statusText = 'بانتظار المربي';
                statusColor = 'bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 border-yellow-100 dark:border-yellow-800/30';
                statusIcon = 'hourglass_top';
            } else if (studentSubmission.status === 'مراجعة') {
                statusText = 'قيد الإنجاز';
                statusColor = 'bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-400 border-orange-100 dark:border-orange-800/30';
                statusIcon = 'pending';
            }
        }

        statusBadge = `
            <span class="inline-flex items-center gap-1 rounded-full ${statusColor} px-2.5 py-1 text-xs font-semibold border">
                <span class="material-symbols-outlined text-[14px] ${statusText === 'قيد الإنجاز' ? 'animate-pulse' : ''}">${statusIcon}</span>
                ${statusText}
            </span>
        `;

        // صورة النشاط (استخدام placeholder أو صورة من activity)
        const imageUrl = activity.content?.imageUrl || activity.imageUrl || 'https://lh3.googleusercontent.com/aida-public/AB6AXuCxvuiHpRepqeglq2-HzVCyCjUDjgmqQU8lJFpn3ibVBKVxoLnkylO3PlPAATueW9cxCxar1uwGwBMwkKayN8O28YXmA_ioj9inuxrO4RwDEe5P93X24TflUhUrsbiQfj5p5gE16M0XCrJtp5r9SBf_mMz4l3O1jK3JkkexHoYrWwX_4PkVEe2JXtQFagCIEwNQomc2rxM26vHaq-x6dqQv658aJ3WLxmQoLV-RQWMf2YeyIEZ22EMwXzj7blozQp2YuJXco0DyGJw';

        // نص الزر حسب النوع
        const buttonText = activity.type === 'وقفة تدبرية' ? 'بدء التدبر' : 
                          activity.type === 'مهمة عملية' ? 'بدء النشاط' : 'بدء الدرس';

        // رابط الصفحة
        const activityPage = activity.type === 'وقفة تدبرية' ? 
            'student_Learning_Paths_6_Tadabbur_Submission.html' :
            'student_Learning_Paths_2_Lesson_Study.html';

        return `
            <article class="group relative flex flex-col gap-4 rounded-2xl bg-surface-light dark:bg-surface-dark p-5 shadow-sm hover:shadow-md border border-transparent hover:border-primary/20 transition-all duration-300">
                <div class="flex items-start justify-between">
                    <div class="flex items-center gap-3">
                        <div class="size-12 rounded-xl ${config.bgColor} ${config.textColor} flex items-center justify-center">
                            <span class="material-symbols-outlined text-2xl">${config.icon}</span>
                        </div>
                        <div>
                            <p class="text-text-sub dark:text-gray-400 text-xs font-medium">${config.label}</p>
                            <h3 class="text-text-main dark:text-white text-lg font-bold leading-tight group-hover:text-primary-dark dark:group-hover:text-primary transition-colors">${activity.title || 'نشاط'}</h3>
                        </div>
                    </div>
                    ${statusBadge}
                </div>
                <div class="h-32 w-full rounded-xl bg-cover bg-center overflow-hidden relative" style="background-image: url('${imageUrl}');">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                    ${activity.dueDate ? `
                        <div class="absolute bottom-3 right-3 text-white text-xs font-medium flex items-center gap-1">
                            <span class="material-symbols-outlined text-[16px]">schedule</span>
                            ${new Date(activity.dueDate).toLocaleDateString('ar-SA')}
                        </div>
                    ` : ''}
                </div>
                <div class="mt-auto pt-2">
                    <button onclick="window.location.href='${activityPage}?id=${activity._id}'" class="w-full h-10 rounded-xl bg-primary/10 hover:bg-primary text-primary-dark hover:text-surface-dark dark:text-primary dark:hover:text-surface-dark font-bold text-sm transition-all duration-300 flex items-center justify-center gap-2 group/btn">
                        <span>${buttonText}</span>
                        <span class="material-symbols-outlined text-[18px] group-hover/btn:-translate-x-1 transition-transform rtl:rotate-180">arrow_right_alt</span>
                    </button>
                </div>
            </article>
        `;
    }

    // ============================================
    // تحميل الأنشطة من API
    // ============================================
    async function loadActivities() {
        try {
            // التحقق من المصادقة
            if (typeof Auth === 'undefined' || !Auth.isAuthenticated()) {
                window.location.href = '../public/auth/login.html';
                return;
            }

            // الحصول على بيانات الطالب
            const studentResponse = await API.getMyStudent();
            if (!studentResponse.success || !studentResponse.student) {
                throw new Error('لم يتم العثور على ملف الطالب');
            }

            const student = studentResponse.student;
            const studentId = student._id;

            // تحميل جميع الأنشطة
            const activitiesResponse = await API.getActivities({ status: 'منشور' });
            if (!activitiesResponse.success) {
                throw new Error('فشل في تحميل الأنشطة');
            }

            allActivities = activitiesResponse.activities || [];

            // تصفية الأنشطة حسب submissions الطالب
            allActivities = allActivities.map(activity => {
                // البحث عن submission للطالب الحالي
                let submission = null;
                if (activity.submissions && Array.isArray(activity.submissions)) {
                    submission = activity.submissions.find(s => {
                        // يمكن أن يكون student ObjectId أو object
                        const subStudentId = s.student?._id || s.student;
                        return subStudentId && subStudentId.toString() === studentId.toString();
                    });
                }
                return {
                    ...activity,
                    studentSubmission: submission
                };
            });

            // عرض الأنشطة
            displayActivities();

        } catch (error) {
            console.error('Error loading activities:', error);
            
            if (typeof Toast !== 'undefined') {
                Toast.error(error.message || 'حدث خطأ في تحميل الأنشطة');
            } else {
                alert(error.message || 'حدث خطأ في تحميل الأنشطة');
            }

            // إظهار رسالة في الحاويات
            const containers = ['knowledgeCouncilsContainer', 'quranicReflectionsContainer', 'practicalTasksContainer'];
            containers.forEach(containerId => {
                const container = document.getElementById(containerId);
                if (container) {
                    container.innerHTML = `
                        <div class="col-span-full text-center py-12">
                            <span class="material-symbols-outlined text-4xl text-red-500 mb-4">error</span>
                            <p class="text-text-sub dark:text-gray-400">حدث خطأ في تحميل الأنشطة</p>
                        </div>
                    `;
                }
            });
        }
    }

    // ============================================
    // عرض الأنشطة في الأقسام
    // ============================================
    function displayActivities() {
        // تصفية الأنشطة حسب البحث
        let filteredActivities = allActivities;
        
        if (currentSearch) {
            filteredActivities = filteredActivities.filter(activity =>
                activity.title?.toLowerCase().includes(currentSearch.toLowerCase()) ||
                activity.description?.toLowerCase().includes(currentSearch.toLowerCase())
            );
        }

        // تصفية حسب الحالة
        if (currentFilter !== 'all') {
            filteredActivities = filteredActivities.filter(activity => {
                const submission = activity.studentSubmission;
                if (currentFilter === 'in-progress') {
                    return submission && (submission.status === 'معلق' || submission.status === 'مراجعة');
                } else if (currentFilter === 'pending') {
                    return submission && submission.status === 'معلق';
                } else if (currentFilter === 'completed') {
                    return submission && submission.status === 'مقبول';
                }
                return !submission; // جديد
            });
        }

        // تقسيم الأنشطة حسب النوع
        const knowledgeCouncils = filteredActivities.filter(a => a.type === 'مجلس علم');
        const quranicReflections = filteredActivities.filter(a => a.type === 'وقفة تدبرية');
        const practicalTasks = filteredActivities.filter(a => a.type === 'مهمة عملية');

        // عرض الأنشطة
        displayActivitiesInContainer('knowledgeCouncilsContainer', knowledgeCouncils);
        displayActivitiesInContainer('quranicReflectionsContainer', quranicReflections);
        displayActivitiesInContainer('practicalTasksContainer', practicalTasks);

        // تحديث عدد الأنشطة في أزرار التصفية
        updateFilterButtons();
    }

    // ============================================
    // عرض الأنشطة في حاوية محددة
    // ============================================
    function displayActivitiesInContainer(containerId, activities) {
        const container = document.getElementById(containerId);
        if (!container) return;

        if (activities.length === 0) {
            container.innerHTML = `
                <div class="col-span-full text-center py-12">
                    <span class="material-symbols-outlined text-4xl text-gray-400 mb-4">inbox</span>
                    <p class="text-text-sub dark:text-gray-400">لا توجد أنشطة متاحة</p>
                </div>
            `;
            return;
        }

        container.innerHTML = activities.map(activity => createActivityCard(activity)).join('');
    }

    // ============================================
    // تحديث أزرار التصفية
    // ============================================
    function updateFilterButtons() {
        const inProgressCount = allActivities.filter(a => {
            const sub = a.studentSubmission;
            return sub && (sub.status === 'معلق' || sub.status === 'مراجعة');
        }).length;

        const pendingCount = allActivities.filter(a => {
            const sub = a.studentSubmission;
            return sub && sub.status === 'معلق';
        }).length;

        const completedCount = allActivities.filter(a => {
            const sub = a.studentSubmission;
            return sub && sub.status === 'مقبول';
        }).length;

        // تحديث الأرقام في الأزرار
        const buttons = document.querySelectorAll('.flex.h-9.shrink-0');
        buttons.forEach((btn, index) => {
            const text = btn.textContent.trim();
            if (text.includes('قيد الإنجاز')) {
                const badge = btn.querySelector('span.bg-orange-100');
                if (badge) badge.textContent = inProgressCount;
            }
        });
    }

    // ============================================
    // إعداد البحث والتصفية
    // ============================================
    function setupSearchAndFilter() {
        // البحث
        const searchInput = document.querySelector('input[placeholder*="ابحث"]');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                currentSearch = e.target.value;
                displayActivities();
            });
        }

        // أزرار التصفية
        const filterButtons = document.querySelectorAll('.flex.h-9.shrink-0');
        filterButtons.forEach((btn, index) => {
            btn.addEventListener('click', () => {
                // إزالة التحديد من جميع الأزرار
                filterButtons.forEach(b => {
                    b.classList.remove('bg-primary', 'text-surface-dark');
                    b.classList.add('bg-white', 'dark:bg-surface-dark', 'border', 'text-text-main', 'dark:text-gray-300');
                });

                // تحديد الزر المختار
                btn.classList.remove('bg-white', 'dark:bg-surface-dark', 'border', 'text-text-main', 'dark:text-gray-300');
                btn.classList.add('bg-primary', 'text-surface-dark');

                // تحديد الفلتر
                const text = btn.textContent.trim();
                if (text.includes('الكل')) {
                    currentFilter = 'all';
                } else if (text.includes('قيد الإنجاز')) {
                    currentFilter = 'in-progress';
                } else if (text.includes('بانتظار المربي')) {
                    currentFilter = 'pending';
                } else if (text.includes('المكتملة')) {
                    currentFilter = 'completed';
                }

                displayActivities();
            });
        });
    }

    // ============================================
    // تهيئة الصفحة
    // ============================================
    async function init() {
        // التحقق من المصادقة
        if (typeof Auth !== 'undefined') {
            if (!Auth.requireAuth('../public/auth/login.html')) {
                return;
            }
        }

        // تحميل الأنشطة
        await loadActivities();

        // إعداد البحث والتصفية
        setupSearchAndFilter();

        // زر تسجيل الخروج
        const logoutBtn = document.getElementById('logoutBtn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', () => {
                if (confirm('هل تريد تسجيل الخروج؟')) {
                    if (typeof Auth !== 'undefined') {
                        Auth.logout();
                    } else {
                        sessionStorage.clear();
                        localStorage.removeItem('currentUserName');
                        localStorage.removeItem('accountType');
                        window.location.href = '../public/landing_page/index.html';
                    }
                }
            });
        }
    }

    // تشغيل عند تحميل الصفحة
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
</script>
</body></html>